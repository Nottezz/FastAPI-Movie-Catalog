{% from "macros/form-fields.html" import form_field %}
{% extends "base.html" %}
{% block title %}Add new Movie{% endblock %}

{% block main %}
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6">
        <div class="card shadow-sm border-0">
          <div class="card-header bg-primary text-white text-center">
            <h4 class="mb-0">
              <i class="bi bi-plus-circle me-1"></i> Add new movie
            </h4>
          </div>

          <div class="card-body p-4">
            <form action="{{ url_for('movie-catalog:create') }}" method="post" novalidate>
              {% for field_name, field_schema in model_schema.properties.items() %}
                {% set is_required = field_name in model_schema.get("required") or [] %}
                {{ form_field(
                  field_name=field_name,
                  field_schema=field_schema,
                  is_required=is_required,
                  validated=form_validated,
                  error=errors and errors[field_name] or None,
                  value=form_data and form_data[field_name] or field_schema.default
                ) }}
              {% endfor %}

              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg shadow-sm">
                  <i class="bi bi-check-circle me-1"></i> Create
                </button>
                <a href="{{ url_for('movie-catalog:list') }}" class="btn btn-outline-secondary mt-3">
                  <i class="bi bi-arrow-left me-1"></i> Back to Rating list
                </a>
              </div>
            </form>
          </div>

          <div class="card-footer text-muted small text-center">
            <i class="bi bi-info-circle me-1"></i>
            Fill out the form to add a movie to the catalog.
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
